<!DOCTYPE html>
<html lang="en"> <head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>Chapter Reader</title> <style type="text/css">

*{ box-sizing: border-box; } body { margin: 0; padding: 0; height: 100vh; width: 100%; background-color: black; color: white; font-family: sans-serif; display: grid; grid-template-rows: 1fr 70px; overflow: hidden; } #iframe { border: none; width: 100%; height: 100%; } .controls { height: 70px; background: #1a1a1a; display: flex; align-items: center; justify-content: space-around; padding: 0 10px; border-top: 1px solid #333; } .control-item { display: flex; flex-direction: column; align-items: center; gap: 2px; } button { padding: 8px 12px; background: #444; color: white; border: none; border-radius: 4px; } input[type="number"] { width: 50px; background: #333; color: white; border: 1px solid #555; text-align: center; } label { font-size: 10px; color: #888; } </style> </head> <body> <iframe id="iframe"></iframe> <div class="controls"> <button onclick="newThingy(chapter - 1)" id="back">Prev</button> <div class="control-item"> <label>CH</label> <input id="chapterInput" type="number" onchange="newThingy(parseInt(this.value))"> </div> <button onclick="newThingy(chapter + 1)" id="next">Next</button> <div class="control-item"> <label>TEXT</label> <input id="textColor" type="color" onchange="changeColor('textColor', this.value)"> </div> <div class="control-item"> <label>BG</label> <input id="backgroundColor" type="color" onchange="changeColor('backgroundColor', this.value)"> </div> <div class="control-item"> <label>PROXY</label> <input id="corsProxy" type="checkbox"> </div> </div> <script type="text/javascript"> var cors = ''; var corsProxy = document.getElementById('corsProxy'); if (localStorage.getItem('cors') === 'true') { cors = 'https://api.codetabs.com/v1/proxy?quest='; corsProxy.checked = true; } corsProxy.addEventListener('change', function() { if (this.checked) { localStorage.setItem('cors', 'true'); cors = 'https://api.codetabs.com/v1/proxy?quest='; } else { localStorage.setItem('cors', 'false'); cors = ''; } }); var chapter = parseInt(localStorage.getItem('chapter')) || 1; var savedBG = localStorage.getItem('backgroundColor') || '#000000'; var savedText = localStorage.getItem('textColor') || '#ffffff'; document.body.style.backgroundColor = savedBG; document.getElementById('backgroundColor').value = savedBG; document.getElementById('textColor').value = savedText; document.getElementById('chapterInput').value = chapter; async function fetchExternalHtml(url) { try { var response = await fetch(cors + encodeURIComponent(url)); if (!response.ok) throw new Error('Network error'); return await response.text(); } catch (e) { return null; } } function changeColor(type, value) { localStorage.setItem(type, value); if (type === 'backgroundColor') document.body.style.backgroundColor = value; var iframe = document.getElementById('iframe'); if (iframe.contentDocument && iframe.contentDocument.body) { iframe.contentDocument.body.style.backgroundColor = localStorage.getItem('backgroundColor'); iframe.contentDocument.body.style.color = localStorage.getItem('textColor'); } } async function newThingy(ch) { if (ch !== undefined) chapter = ch; if (chapter < 1) chapter = 1; localStorage.setItem('chapter', chapter); document.getElementById('chapterInput').value = chapter; document.getElementById('back').disabled = (chapter <= 1); var url = 'https://novelhi.com/s/Spare-Me-Great-Lord/' + chapter; var htmlContent = await fetchExternalHtml(url); if (htmlContent) { var parser = new DOMParser(); var doc = parser.parseFromString(htmlContent, 'text/html'); var paragraphs = Array.from(doc.querySelectorAll('sent')).map(function(p) { return p.innerText; }).join('\n\n').replaceAll("LÃ¼", "Lu"). replaceAll("Lv Shu", "Lu Shu").replaceAll("Lv Xiaoyu", "Lu Xiaoyu"); var textColor = localStorage.getItem('textColor') || 'white'; var backgroundColor = localStorage.getItem('backgroundColor') || 'black'; var docString = '<html><head><style>body{background:' + backgroundColor + ';color:' + textColor + ';white-space:pre-wrap;font-family:sans-serif;padding:30px;font-size:18px;line-height:1.6;}</style></head><body>' + paragraphs + '</body></html>'; document.getElementById('iframe').srcdoc = docString; } } window.addEventListener('keydown', function(e) { if (e.key === 'ArrowLeft') newThingy(chapter - 1); if (e.key === 'ArrowRight') newThingy(chapter + 1); }); newThingy(chapter); </script> </body>


